@page "/"
@using FinancesBlazor.Components.Grid;
@using System.Text.Json.Nodes;
@using FinancesBlazor.ViewManager;
@inject ViewManager _viewManager;

<PageTitle>@_viewManager.ActiveView.Title</PageTitle>
<FinancesBlazor.Components.Grid.Grid ReloadDataRequested="ReloadDataRequested" Parameters="@_viewManager.ActiveView.Parameters" Data="_data" />


@code{
    private ViewListParameters? _settings;
    private List<JsonNode>? _data;
    
    protected override Task OnInitializedAsync()
    {
        return base.OnInitializedAsync();
    }

    protected async Task ReloadDataRequested()
    {
        _data = await _viewManager.ActiveView.Service.Get();
    }
}