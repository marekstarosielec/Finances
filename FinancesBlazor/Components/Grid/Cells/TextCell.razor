@using DataSource;
@using DataViews;

<td class="@GetCellStyle()" @onclick="selectRecord">@GetCellValue()</td>

@code {
    [Parameter]
    public DataView? DataView { get; set; }

    [Parameter]
    public DataRow? Row { get; set; }

    [Parameter]
    public DataViewColumn? Column { get; set; }

    private string GetCellStyle()
    {
        var result = string.Empty;
        if (Column == null)
            return result;

        if (Column.HorizontalAlign == DataViewColumnContentAlign.Right)
            result += "text-end ";

        return result;
    }

    public string? GetCellValue()
    {
        var result = string.Empty;
        if (Column == null || Row == null)
            return result;

        var value = Row[Column.PrimaryDataColumnName].OriginalValue;
        if (value == null)
            return Column.NullValue;

        return value.ToString();
    }

    async Task selectRecord()
    {
        if (DataView == null || Row == null || Column == null)
            return;

        await DataView.SelectRecord(Row, Column);
    }

}
