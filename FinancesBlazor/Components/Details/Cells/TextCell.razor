@using DataSource;
@using DataView;

@if ((Column?.NumberOfLinesInDetails ?? 1) == 1)
{
    <input type="text" aria-label="@Column?.Title" aria-describedby="@Column?.Title" value="@Value" autocomplete="off" placeholder="@Column?.Title" />
} else
{
    <textarea rows="@Column?.NumberOfLinesInDetails" type="text" aria-label="@Column?.Title" aria-describedby="@Column?.Title" placeholder="@Column?.Title" value="@Value" autocomplete="off" />
}
@code {
    [Parameter]
    public DataView? DataView { get; set; }

    [Parameter]
    public DataRow? Row { get; set; }

    [Parameter]
    public DataViewColumn? Column { get; set; }

    public string? Value {
        get 
        {
            if (DataView == null || Column == null || Row == null)
                return null;
            var column = DataView.Result?.Columns.FirstOrDefault(c => c.ColumnName == Column.PrimaryDataColumnName);
            if (column == null)
                return null;
            return Row[column].CurrentValue as string;
        }
    }
}
