@using DataView;
@inject DataViewManager _dataViewManager;

<button class="btn btn-primary" @onclick="() => Test()">Test</button>
@code {
    [Parameter]
    public DataView? DataView { get; set; }

    [Parameter]
    public bool SingleRecord { get; set; }


    async Task Test()
    {
        if (DataView == null)
            return;

        //    _dataViewManager.OpenSideDialog(false);
        List<string> ids = new List<string>();
        if (SingleRecord)
            ids.Add(DataView.SelectedRecordId);
        else
            ids.AddRange(DataView.CheckedRecords);

        var detailsView = _dataViewManager.DataViews.FirstOrDefault(dv => dv.Name == DataView.DetailsViewName);
        if (detailsView == null)
            return;

        detailsView.Query.IdFilters.Clear();
        detailsView.Query.IdFilters.AddRange(ids);
        await detailsView.Requery();
        var t = detailsView.Result;

    }
}
